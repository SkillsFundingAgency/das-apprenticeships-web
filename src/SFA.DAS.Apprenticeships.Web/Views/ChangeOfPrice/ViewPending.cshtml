@model ViewPendingPriceChangeModel
@{
    ViewData["Title"] = "View change request - Manage apprenticeships";
}

<div class="govuk-width-container ">

    @*Renders href as href="https://approvals.{domain}/{ProviderReferenceNumber}/apprentices/{ApprenticeshipHashedId}" *@
    <a class="govuk-back-link" asp-external-subdomain="approvals" asp-external-id="@Model.ProviderReferenceNumber" asp-external-controller="apprentices" asp-external-action="@Model.ApprenticeshipHashedId">
        Back
    </a>

	<div class="govuk-grid-row">
		<div class="govuk-grid-column-two-thirds">
			<h1 class="govuk-heading-l">View change request</h1>
			<h2 class="govuk-heading-m">Price changes you've requested</h2>
			<table class="govuk-table">
				<thead class="govuk-table__head">
					<tr class="govuk-table__row">
						<th scope="col" class="govuk-table__header app-custom-class" style="width:250px;"></th>
						<th scope="col" class="govuk-table__header app-custom-class">Current</th>
						<th scope="col" class="govuk-table__header app-custom-class govuk-!-width-one-third">Requested</th>
						<th scope="col" class="govuk-table__header app-custom-class "></th>
					</tr>
				</thead>
				<tbody class="govuk-table__body">

					<component type="typeof(DetailsRowComponent)"
							   param-Id='"Trainingprice"'
							   param-Label='"Training price"'
							   param-OrginalValue='Model.OriginalTrainingPrice.FormatCurrency()'
							   param-Value='Model.ApprenticeshipTrainingPrice.FormatCurrency()'
							   render-mode="Static" />

					<component type="typeof(DetailsRowComponent)"
							   param-Id='"EndPointAssessmentPrice"'
							   param-Label='"End-point assessment price"'
							   param-OrginalValue='Model.OriginalEndPointAssessmentPrice.FormatCurrency()'
							   param-Value='Model.ApprenticeshipEndPointAssessmentPrice.FormatCurrency()'
							   render-mode="Static" />

					<component type="typeof(DetailsRowComponent)"
							   param-Id='"TotalPrice"'
							   param-Label='"Total price"'
							   param-OrginalValue='(Model.OriginalTrainingPrice + Model.OriginalEndPointAssessmentPrice).FormatCurrency()'
							   param-Value='Model.ApprenticeshipTotalPrice.FormatCurrency()'
							   render-mode="Static" />
				</tbody>
			</table>
            <dl class="govuk-summary-list govuk-summary-list--no-border">
                <component type="typeof(DetailsRowComponent)"
                           param-Id='"EffectiveFromDate"'
                           param-Label='"Effective from date"'
                           param-Value='Model.EffectiveFromDate.ToString()'
                           param-RowType='DetailsRowComponent.DetailsRowType.DescriptionList'
                           render-mode="Static" />

                <component type="typeof(DetailsRowComponent)"
                           param-Id='"ReasonForChange"'
                           param-Label='"Reason for change"'
                           param-Value='Model.ReasonForChangeOfPrice'
                           param-RowType='DetailsRowComponent.DetailsRowType.DescriptionList'
                           render-mode="Static" />
            </dl>
            <form method="post" action="/provider/@Model.ProviderReferenceNumber/ChangeOfPrice/@Model.ApprenticeshipHashedId/pending">
                @Html.AntiForgeryToken()
                @Html.HiddenFor(m=> m.ApprenticeshipKey)
                <div class="govuk-form-group">
                    <div id="cancel-request-hint" class="govuk-hint">
                        Do you want to cancel this request?
                    </div>
                    
                    <div class="govuk-radios">
                        <div class="govuk-radios__item" id="radio-item-yes">
                            <input class="govuk-radios__input" type="radio" id="option-yes" name="CancelRequest" value="1">
                            <label class="govuk-label govuk-radios__label" for="option-yes">Yes, cancel the request</label>
                        </div>
                        <div class="govuk-radios__item" id="radio-item-no">
                            <input class="govuk-radios__input" type="radio" id="option-no" name="CancelRequest" value="0">
                            <label class="govuk-label govuk-radios__label" for="option-no">No, keep the request</label>
                        </div>
                    </div>
                </div>
                <button class="govuk-button" data-module="govuk-button" type="submit" id="buttonSubmitForm">
                    Continue
                </button>
            </form>
		</div>
	</div>
</div>