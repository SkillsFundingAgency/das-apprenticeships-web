@*
	Adds a details row, typically used on check details pages.
	This can be used within both a <tbody> and a <dl> element.

	The row can display a before and after value or just a single value.
*@
@switch (RowType)
{
	case DetailsRowType.Table:
		<tr class="govuk-table__row">
			<th scope="row" class="govuk-table__header">@Label</th>
			@if (!string.IsNullOrEmpty(OriginalValue))
			{
				<td class="govuk-table__cell" id="@GetOriginalValueId()">@OriginalValue</td>
			}
            @if (ShowWarningOnNewValue)
            {
                <td class="govuk-table__cell" id="@GetNewValueId()" colspan="2">
                    @Value
                    <span style="width:26px; position: relative; float: left; margin:0px 4px 0px 0px">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-7v2h2v-2h-2zm0-8v6h2V7h-2z"></path></g></svg>
                    </span>
                </td>
            }
            else
            {
                <td class="govuk-table__cell" id="@GetNewValueId()" colspan="2">@Value</td>
            }
			<td class="govuk-table__cell" style="text-align: right;">
				@if (!string.IsNullOrEmpty(Url))
				{
					<a class="govuk-link" href="@Url" id="@GetLinkId()">
						Change<span class="govuk-visually-hidden">@Label</span>
					</a>
				}
			</td>
		</tr>
		break;

	case DetailsRowType.TableTwoColumns:
		<tr class="govuk-table__row">
			<th scope="row" class="govuk-table__header">@Label</th>
			@if (!string.IsNullOrEmpty(OriginalValue))
			{
				<td class="govuk-table__cell" id="@GetOriginalValueId()">@OriginalValue</td>
				<td class="govuk-table__cell" id="@GetNewValueId()">@Value</td>
			}
			else
			{
				<td class="govuk-table__cell" id="@GetNewValueId()" colspan="2">@Value</td>
			}
		</tr>
		break;

    case DetailsRowType.DescriptionList:
		<div class="govuk-summary-list__row">
			<dt class="govuk-summary-list__key">@Label</dt>
			<dd class="govuk-summary-list__value govuk-!-width-one-quarter" style="padding-left:10px;" id="@Id">@Value</dd>
			<dd class="govuk-summary-list__actions">
				@if (!string.IsNullOrEmpty(Url))
				{
					<a class="govuk-link" href="@Url" id="@GetLinkId()">
						Change<span class="govuk-visually-hidden">@Label</span>
					</a>
				}
			</dd>
		</div>
        break;
}

@code {
	[Parameter]
	public string Id { get; set; } = string.Empty;

	[Parameter]
	public string Label { get; set; } = string.Empty;

	[Parameter]
	public string OriginalValue { get; set; } = string.Empty;

	[Parameter]
	public string Value { get; set; } = string.Empty;

	[Parameter]
	public string Url { get; set; } = string.Empty;

	[Parameter]
	public DetailsRowType RowType { get; set; } = DetailsRowType.Table;

    [Parameter]
    public bool ShowWarningOnNewValue { get; set; } = false;

	public enum DetailsRowType
	{
		Table,
		TableTwoColumns,
		DescriptionList
	}

	public string GetLinkId()
    {
        return $"link{Id}";
    }

	public string GetOriginalValueId()
	{
		return $"{Id}-OriginalValue";
	}

	public string GetNewValueId()
	{
		return $"{Id}-NewValue";
	}
}
